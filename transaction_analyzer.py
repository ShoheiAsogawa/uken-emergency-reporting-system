#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
取引履歴をカテゴリとステータスごとに集計するスクリプト
"""

import re
from collections import defaultdict

# データを文字列として定義
data = """以下を入金と返金と資金移動のステータスに分けて合計してください。

入金
08:51
請求書ID 135444897799
jcb
••• 1026

232001212
+ 4 900.00 JPY
完了
入金
08:48
請求書ID 135444389895
jcb
••• 1026

232001212
+ 40 000.00 JPY
完了
入金
07:49
請求書ID 135433764871
jcb
••• 1026

232001212
+ 50 000.00 JPY
完了
昨日, 22 12月 2025

入金
22 12月, 19:32
請求書ID 135193759751
jcb
••• 1026

232001212
+ 7 000.00 JPY
完了
12月 2025

入金
21 12月, 17:44
請求書ID 134919331847
jcb
••• 1026

232001212
+ 30 000.00 JPY
完了
入金
21 12月, 17:34
請求書ID 134918352903
jcb
••• 1026

232001212
+ 20 000.00 JPY
完了
入金
21 12月, 17:34
請求書ID 134918221831
jcb
••• 1026

232001212
+ 20 000.00 JPY
完了
入金
21 12月, 17:26
請求書ID 134917623815
jcb
••• 1026

232001212
+ 20 000.00 JPY
完了
入金
21 12月, 14:56
請求書ID 134911467527
jcb
••• 1026

232436402
+ 30 000.00 JPY
完了
入金
21 12月, 14:55
請求書ID 134911434759
jcb
••• 1026

232436402
+ 30 000.00 JPY
拒否されました
3Dセキュア（ワンタイムパスワード）認証エラーです。コードが正しく入力されており、有効期限が切れていないことを確認するか、新しいコードをリクエストしてください。問題が解決しない場合は、ご指定の銀行が3Dセキュアに対応していない可能性があります。ご利用の銀行にご連絡いただくか、別のカードまたは決済方法をご利用ください。
返金
21 12月, 11:16
請求書ID 134906396679

232001212
jcb
••• 1026
- 12.68 USD
完了
返金
21 12月, 11:16
請求書ID 134906392583

232001212
jcb
••• 1026
- 19.02 USD
完了
返金
21 12月, 11:14
請求書ID 134906351623

232001212
jcb
••• 1026
- 126.81 USD
完了
返金
21 12月, 11:14
請求書ID 134906347527

232001212
jcb
••• 1026
- 19.02 USD
拒否されました
口座の残高が不足しています。口座にチャージし、もう一度お試しください。
返金
21 12月, 11:14
請求書ID 134906355719

232001212
jcb
••• 1026
- 76.09 USD
完了
返金
21 12月, 06:35
請求書ID 134901559303

232001212
jcb
••• 1026
- 82.43 USD
完了
返金
21 12月, 06:35
請求書ID 134901567495

232001212
jcb
••• 1026
- 107.79 USD
完了
返金
21 12月, 06:35
請求書ID 134901563399

232001212
jcb
••• 1026
- 126.81 USD
完了
資金移動
20 12月, 01:06
請求書ID 170503979013

1090982200853217444

232001212
 529.58 USD
完了
入金
19 12月, 21:38
請求書ID 134675730439
jcb
••• 1026

232001212
+ 50 000.00 JPY
拒否されました
一時的な銀行処理エラーが発生しました。しばらく経ってからお試しいただくか、別の決済方法をご利用ください。それでも問題が解決しない場合は、お手数ですが銀行にお問い合わせください。
入金
19 12月, 21:35
請求書ID 134675234823
jcb
••• 1026

232001212
+ 20 000.00 JPY
完了
返金
19 12月, 21:19
請求書ID 134671241223

232001212
jcb
••• 1026
- 127.14 USD
完了
返金
19 12月, 21:19
請求書ID 134671245319

232001212
jcb
••• 1026
- 108.07 USD
完了
返金
19 12月, 21:19
請求書ID 134671237127

232001212
jcb
••• 1026
- 82.64 USD
完了
入金
19 12月, 21:19
請求書ID 134670970887
jcb
••• 1026

232001212
+ 50 000.00 JPY
完了
返金
19 12月, 21:07
請求書ID 134667075591

232001212
jcb
••• 1026
- 44.50 USD
完了
返金
19 12月, 21:07
請求書ID 134667071495

232001212
jcb
••• 1026
- 82.65 USD
完了
入金
19 12月, 20:59
請求書ID 134664962055
jcb
••• 1026

232001212
+ 20 000.00 JPY
完了
入金
19 12月, 20:57
請求書ID 134664478727
jcb
••• 1026

232001212
+ 20 000.00 JPY
完了
入金
19 12月, 20:54
請求書ID 134664126471
jcb
••• 1026

232001212
+ 20 000.00 JPY
完了
入金
19 12月, 20:46
請求書ID 134662410247
jcb
••• 1026

232001212
+ 20 000.00 JPY
完了
入金
19 12月, 20:29
請求書ID 134659244039
jcb
••• 1026

232001212
+ 20 000.00 JPY
完了
入金
19 12月, 20:28
請求書ID 134659096583
jcb
••• 1026

232001212
+ 20 000.00 JPY
拒否されました
3Dセキュア（ワンタイムパスワード）認証エラーです。コードが正しく入力されており、有効期限が切れていないことを確認するか、新しいコードをリクエストしてください。問題が解決しない場合は、ご指定の銀行が3Dセキュアに対応していない可能性があります。ご利用の銀行にご連絡いただくか、別のカードまたは決済方法をご利用ください。
返金
19 12月, 20:19
請求書ID 134657409031

232001212
jcb
••• 1026
- 82.63 USD
完了
返金
19 12月, 20:19
請求書ID 134657413127

232001212
jcb
••• 1026
- 44.49 USD
完了
入金
19 12月, 20:07
請求書ID 134654652423
jcb
••• 1026

232001212
+ 20 000.00 JPY
完了
返金
19 12月, 19:55
請求書ID 134652026887

232001212
jcb
••• 1026
- 209.72 USD
完了
返金
19 12月, 19:55
請求書ID 134652018695

232001212
jcb
••• 1026
- 127.10 USD
完了
返金
19 12月, 19:55
請求書ID 134652035079

232001212
jcb
••• 1026
- 127.10 USD
完了
返金
19 12月, 19:55
請求書ID 134652039175

232001212
jcb
••• 1026
- 171.59 USD
完了
返金
19 12月, 19:55
請求書ID 134652030983

232001212
jcb
••• 1026
- 127.10 USD
完了
返金
19 12月, 19:55
請求書ID 134652022791

232001212
jcb
••• 1026
- 127.10 USD
完了
返金
19 12月, 19:55
請求書ID 134652014599

232001212
jcb
••• 1026
- 127.10 USD
完了
返金
19 12月, 19:34
請求書ID 134646779911

232001212
jcb
••• 1026
- 127.11 USD
完了
入金
19 12月, 19:30
請求書ID 134645125127
jcb
••• 1026

232001212
+ 20 000.00 JPY
完了
入金
19 12月, 19:29
請求書ID 134644858887
jcb
••• 1026

232001212
+ 20 000.00 JPY
完了
返金
19 12月, 19:28
請求書ID 134644576263

232001212
jcb
••• 1026
- 127.18 USD
完了
入金
19 12月, 19:25
請求書ID 134643871751
jcb
••• 1026

232001212
+ 20 000.00 JPY
完了
返金
19 12月, 19:22
請求書ID 134643228679

232001212
jcb
••• 1026
- 127.23 USD
完了
入金
19 12月, 19:16
請求書ID 134641627143
jcb
••• 1026

232001212
+ 20 000.00 JPY
完了
返金
19 12月, 19:09
請求書ID 134640054279

232001212
jcb
••• 1026
- 127.21 USD
完了
返金
19 12月, 19:09
請求書ID 134640050183

232001212
jcb
••• 1026
- 63.61 USD
完了
入金
19 12月, 19:04
請求書ID 134638931975
jcb
••• 1026

232001212
+ 30 000.00 JPY
完了
入金
19 12月, 19:01
請求書ID 134638059527
jcb
••• 1026

232001212
+ 20 000.00 JPY
完了
入金
19 12月, 18:57
請求書ID 134637187079
jcb
••• 1026

232001212
+ 20 000.00 JPY
完了
返金
19 12月, 18:53
請求書ID 134636257287

232001212
jcb
••• 1026
- 127.29 USD
完了
返金
19 12月, 18:53
請求書ID 134636261383

232001212
jcb
••• 1026
- 63.65 USD
完了
入金
19 12月, 18:40
請求書ID 134631993351
jcb
••• 1026

232001212
+ 20 000.00 JPY
完了
入金
19 12月, 18:34
請求書ID 134630907911
jcb
••• 1026

232001212
+ 40 000.00 JPY
完了
入金
19 12月, 18:32
請求書ID 134630260743
jcb
••• 1026

232001212
+ 20 000.00 JPY
完了
入金
19 12月, 18:30
請求書ID 134629990407
jcb
••• 1026

232001212
+ 20 000.00 JPY
完了
入金
19 12月, 18:19
請求書ID 134627946503
jcb
••• 1026

232001212
+ 33 000.00 JPY
完了
資金移動
19 12月, 18:16
請求書ID 170091597829

232436402

232001212
 20 403.00 JPY
完了
資金移動
19 12月, 18:15
請求書ID 170090971141

232001212

232436402
 130.00 USD
完了
資金移動
19 12月, 18:11
請求書ID 170088079365

232436402

232001212
 19 931.00 JPY
完了
資金移動
19 12月, 18:11
請求書ID 170087702533

232001212

232436402
 127.00 USD
完了
資金移動
19 12月, 18:09
請求書ID 170086273029

232436402

232001212
 20 397.00 JPY
完了
資金移動
19 12月, 18:07
請求書ID 170084216837

232001212

232436402
 130.00 USD
完了
入金
19 12月, 17:59
請求書ID 134623916039
jcb
••• 1026

232001212
+ 20 000.00 JPY
完了
入金
19 12月, 17:57
請求書ID 134623526919
jcb
••• 1026

232001212
+ 20 000.00 JPY
完了
入金
19 12月, 17:52
請求書ID 134622613511
jcb
••• 1026

232001212
+ 20 000.00 JPY
完了
入金
19 12月, 17:45
請求書ID 134620635143
jcb
••• 1026

232001212
+ 20 000.00 JPY
完了
入金
19 12月, 17:34
請求書ID 134618017799
jcb
••• 1026

232001212
+ 20 000.00 JPY
完了
入金
19 12月, 17:32
請求書ID 134617542663
jcb
••• 1026

232001212
+ 20 000.00 JPY
完了
入金
19 12月, 17:29
請求書ID 134617022471
jcb
••• 1026

232001212
+ 20 000.00 JPY
完了
資金移動
19 12月, 17:19
請求書ID 170043551749

232436402

232001212
 20 360.00 JPY
完了
資金移動
19 12月, 16:52
請求書ID 170019352581

232001212

232436402
 130.00 USD
完了
入金
19 12月, 16:35
請求書ID 134605680647
jcb
••• 1026

232001212
+ 20 000.00 JPY
完了
入金
19 12月, 16:33
請求書ID 134605078535
jcb
••• 1026

232001212
+ 20 000.00 JPY
完了
資金移動
19 12月, 16:31
請求書ID 170000412677

232436402

232001212
 19 814.00 JPY
完了
資金移動
19 12月, 16:28
請求書ID 169998282757

232436402

232001212
 30 000.00 JPY
完了
資金移動
19 12月, 15:34
請求書ID 169947881477

232001212

232436402
 130.00 USD
完了
資金移動
19 12月, 15:15
請求書ID 169927987205

232436402

232001212
 20 000.00 JPY
完了
資金移動
19 12月, 15:07
請求書ID 169895284741

232436402

232001212
 20 000.00 JPY
完了
資金移動
19 12月, 15:03
請求書ID 169894195205

232436402

232001212
 20 000.00 JPY
完了
資金移動
19 12月, 14:57
請求書ID 169864458245

232436402

232001212
 20 000.00 JPY
完了
資金移動
19 12月, 14:18
請求書ID 169723904005

232001212

232436402
 160.00 USD
完了
資金移動
19 12月, 14:07
請求書ID 169715625989

232436402

232001212
 20 000.00 JPY
完了
資金移動
19 12月, 13:39
請求書ID 169683636229

232001212

232436402
 120.00 USD
完了
資金移動
19 12月, 12:50
請求書ID 169647693829

232001212

232436402
 200.00 USD
完了
資金移動
19 12月, 12:28
請求書ID 169627369477

232436402

232001212
 30 000.00 JPY
完了
返金
19 12月, 12:24
請求書ID 134563622919

232436402
jcb
••• 1026
- 20 000.00 JPY
完了
資金移動
19 12月, 12:18
請求書ID 169618006021

232436402

232001212
 20 000.00 JPY
完了
資金移動
19 12月, 12:15
請求書ID 169615278085

232436402

232001212
 20 000.00 JPY
完了
入金
19 12月, 12:14
請求書ID 134562168839
jcb
••• 1026

232436402
+ 20 000.00 JPY
完了
資金移動
19 12月, 12:00
請求書ID 169600237573

232001212

232436402
 800.00 USD
完了
出金
19 12月, 11:52
請求書ID 489800400902

232001212
offline-bank-1
Bank transfer (銀行振込)
- 900.00 USD
拒否されました
現在、この方法で出金することはできません。Bank Cardで出金できます。トレードを続けるうちに、利用可能な出金オプションが増えます。
返金
19 12月, 11:37
請求書ID 134556598279

232001212
jcb
••• 1026
- 192.62 USD
完了
入金
19 12月, 11:01
請求書ID 134552440839
jcb
••• 1026

232001212
+ 30 000.00 JPY
完了
返金
19 12月, 10:33
請求書ID 134548598791

232001212
jcb
••• 1026
- 128.42 USD
完了
返金
19 12月, 10:33
請求書ID 134548594695

232001212
jcb
••• 1026
- 1.77 USD
完了
返金
19 12月, 10:33
請求書ID 134548602887

232001212
jcb
••• 1026
- 128.42 USD
完了
返金
19 12月, 10:29
請求書ID 134547296263

232001212
jcb
••• 1026
- 320.99 USD
完了
返金
19 12月, 10:29
請求書ID 134547308551

232001212
jcb
••• 1026
- 128.40 USD
処理中
返金
19 12月, 10:29
請求書ID 134547292167

232001212
jcb
••• 1026
- 128.40 USD
完了
返金
19 12月, 10:29
請求書ID 134547312647

232001212
jcb
••• 1026
- 75.27 USD
完了
返金
19 12月, 10:29
請求書ID 134547300359

232001212
jcb
••• 1026
- 128.40 USD
処理中
返金
19 12月, 10:29
請求書ID 134547288071

232001212
jcb
••• 1026
- 53.13 USD
完了
返金
19 12月, 10:29
請求書ID 134547304455

232001212
jcb
••• 1026
- 128.40 USD
処理中
入金
19 12月, 10:16
請求書ID 134545219591
jcb
••• 1026

232001212
+ 20 000.00 JPY
完了
入金
19 12月, 10:13
請求書ID 134544945159
jcb
••• 1026

232001212
+ 20 000.00 JPY
完了
入金
19 12月, 10:12
請求書ID 134544883719
jcb
••• 1026

232001212
+ 20 000.00 JPY
拒否されました
3Dセキュア（ワンタイムパスワード）認証エラーです。コードが正しく入力されており、有効期限が切れていないことを確認するか、新しいコードをリクエストしてください。問題が解決しない場合は、ご指定の銀行が3Dセキュアに対応していない可能性があります。ご利用の銀行にご連絡いただくか、別のカードまたは決済方法をご利用ください。
資金移動
18 12月, 19:54
請求書ID 168703242245

1090982200853217444

232001212
 41.29 USD
完了
入金
18 12月, 18:57
請求書ID 134247542791
jcb
••• 1026

232001212
+ 20 000.00 JPY
拒否されました
一時的な銀行処理エラーが発生しました。しばらく経ってからお試しいただくか、別の決済方法をご利用ください。それでも問題が解決しない場合は、お手数ですが銀行にお問い合わせください。
入金
17 12月, 09:14
請求書ID 133769232391
jcb
••• 1026

232001212
+ 12 000.00 JPY
完了
入金
17 12月, 09:13
請求書ID 133769125895
jcb
••• 1026

232001212
+ 12 000.00 JPY
拒否されました
3Dセキュア（ワンタイムパスワード）認証エラーです。コードが正しく入力されており、有効期限が切れていないことを確認するか、新しいコードをリクエストしてください。問題が解決しない場合は、ご指定の銀行が3Dセキュアに対応していない可能性があります。ご利用の銀行にご連絡いただくか、別のカードまたは決済方法をご利用ください。
入金
17 12月, 09:13
請求書ID 133769031687
jcb
••• 1026

232001212
+ 20 000.00 JPY
拒否されました
一時的な銀行処理エラーが発生しました。しばらく経ってからお試しいただくか、別の決済方法をご利用ください。それでも問題が解決しない場合は、お手数ですが銀行にお問い合わせください。
入金
17 12月, 09:12
請求書ID 133768916999
jcb
••• 1026

232001212
+ 20 000.00 JPY
拒否されました
3Dセキュア（ワンタイムパスワード）認証エラーです。コードが正しく入力されており、有効期限が切れていないことを確認するか、新しいコードをリクエストしてください。問題が解決しない場合は、ご指定の銀行が3Dセキュアに対応していない可能性があります。ご利用の銀行にご連絡いただくか、別のカードまたは決済方法をご利用ください。
入金
17 12月, 08:54
請求書ID 133767417863
jcb
••• 1026

232001212
+ 20 000.00 JPY
完了
資金移動
16 12月, 20:38
請求書ID 165876674565

1090982200853217444

232001212
 166.23 USD
完了
入金
16 12月, 15:17
請求書ID 133432975367
jcb
••• 1026

232001212
+ 20 000.00 JPY
完了
返金
16 12月, 14:50
請求書ID 133425352707

232001212
jcb
••• 1026
- 129.23 USD
完了
返金
16 12月, 14:50
請求書ID 133425340419

232001212
jcb
••• 1026
- 53.47 USD
完了
返金
16 12月, 14:50
請求書ID 133425360899

232001212
jcb
••• 1026
- 75.75 USD
完了
返金
16 12月, 14:50
請求書ID 133425348611

232001212
jcb
••• 1026
- 129.23 USD
完了
返金
16 12月, 14:50
請求書ID 133425344515

232001212
jcb
••• 1026
- 129.23 USD
完了
返金
16 12月, 14:50
請求書ID 133425356803

232001212
jcb
••• 1026
- 129.23 USD
完了
入金
16 12月, 14:30
請求書ID 133416337415
jcb
••• 1026

232001212
+ 20 000.00 JPY
完了
返金
16 12月, 11:58
請求書ID 133385076739

232001212
jcb
••• 1026
- 129.23 USD
完了
返金
16 12月, 11:58
請求書ID 133385052163

232001212
jcb
••• 1026
- 129.23 USD
完了
返金
16 12月, 11:58
請求書ID 133385027587

232001212
jcb
••• 1026
- 129.23 USD
完了
返金
16 12月, 11:58
請求書ID 133384953859

232001212
jcb
••• 1026
- 129.23 USD
完了
返金
16 12月, 11:58
請求書ID 133385039875

232001212
jcb
••• 1026
- 129.23 USD
完了
返金
16 12月, 11:58
請求書ID 133385023491

232001212
jcb
••• 1026
- 96.92 USD
完了
返金
16 12月, 11:58
請求書ID 133385084931

232001212
jcb
••• 1026
- 75.75 USD
完了
返金
16 12月, 11:58
請求書ID 133385048067

232001212
jcb
••• 1026
- 129.23 USD
完了
返金
16 12月, 11:58
請求書ID 133385080835

232001212
jcb
••• 1026
- 129.23 USD
完了
返金
16 12月, 11:58
請求書ID 133384994819

232001212
jcb
••• 1026
- 64.61 USD
完了
返金
16 12月, 11:58
請求書ID 133384974339

232001212
jcb
••• 1026
- 129.23 USD
完了
返金
16 12月, 11:58
請求書ID 133385031683

232001212
jcb
••• 1026
- 129.23 USD
完了
返金
16 12月, 11:58
請求書ID 133384966147

232001212
jcb
••• 1026
- 129.23 USD
完了
返金
16 12月, 11:58
請求書ID 133384949763

232001212
jcb
••• 1026
- 129.23 USD
完了
返金
16 12月, 11:58
請求書ID 133384941571

232001212
jcb
••• 1026
- 59.94 USD
完了
返金
16 12月, 11:58
請求書ID 133385011203

232001212
jcb
••• 1026
- 129.23 USD
完了
返金
16 12月, 11:58
請求書ID 133385035779

232001212
jcb
••• 1026
- 129.23 USD
完了
返金
16 12月, 11:58
請求書ID 133385064451

232001212
jcb
••• 1026
- 129.23 USD
完了
返金
16 12月, 11:58
請求書ID 133384990723

232001212
jcb
••• 1026
- 323.07 USD
完了
返金
16 12月, 11:58
請求書ID 133385019395

232001212
jcb
••• 1026
- 193.84 USD
完了
返金
16 12月, 11:58
請求書ID 133384982531

232001212
jcb
••• 1026
- 129.23 USD
完了
返金
16 12月, 11:58
請求書ID 133384998915

232001212
jcb
••• 1026
- 129.23 USD
完了
返金
16 12月, 11:58
請求書ID 133384986627

232001212
jcb
••• 1026
- 251.99 USD
完了
返金
16 12月, 11:58
請求書ID 133385056259

232001212
jcb
••• 1026
- 129.23 USD
完了
返金
16 12月, 11:58
請求書ID 133385007107

232001212
jcb
••• 1026
- 129.23 USD
完了
返金
16 12月, 11:58
請求書ID 133384957955

232001212
jcb
••• 1026
- 129.23 USD
完了
返金
16 12月, 11:58
請求書ID 133385060355

232001212
jcb
••• 1026
- 129.23 USD
完了
返金
16 12月, 11:58
請求書ID 133385003011

232001212
jcb
••• 1026
- 32.31 USD
完了
返金
16 12月, 11:58
請求書ID 133385043971

232001212
jcb
••• 1026
- 129.23 USD
完了
返金
16 12月, 11:58
請求書ID 133384970243

232001212
jcb
••• 1026
- 129.23 USD
完了
返金
16 12月, 11:58
請求書ID 133384978435

232001212
jcb
••• 1026
- 129.23 USD
完了
返金
16 12月, 11:58
請求書ID 133385072643

232001212
jcb
••• 1026
- 258.45 USD
完了
返金
16 12月, 11:58
請求書ID 133385015299

232001212
jcb
••• 1026
- 129.23 USD
完了
返金
16 12月, 11:58
請求書ID 133384962051

232001212
jcb
••• 1026
- 129.23 USD
完了
返金
16 12月, 11:58
請求書ID 133385068547

232001212
jcb
••• 1026
- 129.23 USD
完了
返金
16 12月, 11:58
請求書ID 133384945667

232001212
jcb
••• 1026
- 129.23 USD
完了
入金
16 12月, 10:34
請求書ID 133373706247
jcb
••• 1026

232001212
+ 50 000.00 JPY
完了
入金
16 12月, 10:33
請求書ID 133373505543
jcb
••• 1026

232001212
+ 20 000.00 JPY
完了
入金
16 12月, 10:30
請求書ID 133372948487
jcb
••• 1026

232001212
+ 20 000.00 JPY
完了
入金
16 12月, 10:29
請求書ID 133372764167
jcb
••• 1026

232001212
+ 20 000.00 JPY
完了
入金
16 12月, 10:26
請求書ID 133372276743
jcb
••• 1026

232001212
+ 20 000.00 JPY
完了
入金
16 12月, 10:21
請求書ID 133371883527
jcb
••• 1026

232001212
+ 20 000.00 JPY
完了
入金
16 12月, 10:18
請求書ID 133371510791
jcb
••• 1026

232001212
+ 20 000.00 JPY
完了
入金
16 12月, 10:13
請求書ID 133370900487
jcb
••• 1026

232001212
+ 20 000.00 JPY
完了
入金
16 12月, 10:08
請求書ID 133370314759
jcb
••• 1026

232001212
+ 20 000.00 JPY
完了
入金
16 12月, 10:06
請求書ID 133369946119
jcb
••• 1026

232001212
+ 20 000.00 JPY
完了
入金
16 12月, 10:02
請求書ID 133369266183
jcb
••• 1026

232001212
+ 40 000.00 JPY
完了
入金
16 12月, 10:00
請求書ID 133369008135
jcb
••• 1026

232001212
+ 20 000.00 JPY
完了
入金
16 12月, 09:58
請求書ID 133368741895
jcb
••• 1026

232001212
+ 20 000.00 JPY
完了
入金
16 12月, 09:56
請求書ID 133368569863
jcb
••• 1026

232001212
+ 20 000.00 JPY
完了
入金
16 12月, 09:53
請求書ID 133368270855
jcb
••• 1026

232001212
+ 20 000.00 JPY
完了
資金移動
16 12月, 09:51
請求書ID 165073932293

232436402

232001212
 20 000.00 JPY
完了
入金
16 12月, 09:50
請求書ID 133368000519
jcb
••• 1026

232436402
+ 20 000.00 JPY
完了
入金
16 12月, 09:40
請求書ID 133367365639
jcb
••• 1026

232001212
+ 20 000.00 JPY
完了
入金
16 12月, 09:16
請求書ID 133365260295
jcb
••• 1026

232001212
+ 20 000.00 JPY
完了
入金
16 12月, 08:57
請求書ID 133363548167
jcb
••• 1026

232001212
+ 20 000.00 JPY
完了
入金
16 12月, 08:53
請求書ID 133363339271
jcb
••• 1026

232001212
+ 20 000.00 JPY
完了
入金
16 12月, 08:12
請求書ID 133360140295
jcb
••• 1026

232001212
+ 20 000.00 JPY
完了
入金
16 12月, 08:11
請求書ID 133360074759
jcb
••• 1026

232001212
+ 20 000.00 JPY
拒否されました
3Dセキュア（ワンタイムパスワード）認証エラーです。コードが正しく入力されており、有効期限が切れていないことを確認するか、新しいコードをリクエストしてください。問題が解決しない場合は、ご指定の銀行が3Dセキュアに対応していない可能性があります。ご利用の銀行にご連絡いただくか、別のカードまたは決済方法をご利用ください。
資金移動
15 12月, 16:03
請求書ID 164135456773

1090982200853217444

232001212
 38.52 USD
完了
入金
14 12月, 10:35
請求書ID 132825124871
jcb
••• 1026

232001212
+ 20 000.00 JPY
完了
返金
14 12月, 10:29
請求書ID 132824969219

232001212
jcb
••• 1026
- 128.35 USD
完了
返金
14 12月, 10:29
請求書ID 132824965123

232001212
jcb
••• 1026
- 155.80 USD
完了
返金
14 12月, 10:29
請求書ID 132824973315

232001212
jcb
••• 1026
- 4.65 USD
完了
入金
14 12月, 09:03
請求書ID 132823171079
jcb
••• 1026

232001212
+ 15 000.00 JPY
完了
資金移動
14 12月, 08:39
請求書ID 163313885189

232436402

232001212
 30 000.00 JPY
完了
入金
14 12月, 06:28
請求書ID 132818370567
jcb
••• 1026

232436402
+ 30 000.00 JPY
完了
入金
13 12月, 22:28
請求書ID 132794753031
jcb
••• 1026

232001212
+ 20 000.00 JPY
完了
入金
13 12月, 22:27
請求書ID 132794683399
jcb
••• 1026

232001212
+ 20 000.00 JPY
拒否されました
3Dセキュア（ワンタイムパスワード）認証エラーです。コードが正しく入力されており、有効期限が切れていないことを確認するか、新しいコードをリクエストしてください。問題が解決しない場合は、ご指定の銀行が3Dセキュアに対応していない可能性があります。ご利用の銀行にご連絡いただくか、別のカードまたは決済方法をご利用ください。
返金
13 12月, 17:56
請求書ID 132779016195

232001212
jcb
••• 1026
- 192.53 USD
完了
返金
13 12月, 17:56
請求書ID 132779020291

232001212
jcb
••• 1026
- 36.74 USD
完了
返金
13 12月, 17:56
請求書ID 132779012099

232001212
jcb
••• 1026
- 27.44 USD
完了
入金
13 12月, 14:23
請求書ID 132767707143
jcb
••• 1026

232001212
+ 20 000.00 JPY
完了
入金
13 12月, 14:22
請求書ID 132767662087
jcb
••• 1026

232436402
+ 20 000.00 JPY
完了
資金移動
12 12月, 18:54
請求書ID 162009534469

1090982200853217444

232001212
 22.50 USD
完了
入金
11 12月, 06:39
請求書ID 131899527171
jcb
••• 1026

232001212
+ 5 000.00 JPY
完了
入金
11 12月, 06:26
請求書ID 131897507843
jcb
••• 1026

232001212
+ 20 000.00 JPY
完了
資金移動
11 12月, 00:44
請求書ID 159258329093

1090982200853217444

232001212
 207.19 USD
完了
入金
10 12月, 23:22
請求書ID 131721646083
jcb
••• 1026

232001212
+ 10 000.00 JPY
完了
返金
10 12月, 22:46
請求書ID 131709116419

232001212
jcb
••• 1026
- 63.86 USD
完了
返金
10 12月, 22:46
請求書ID 131709095939

232001212
jcb
••• 1026
- 127.73 USD
完了
返金
10 12月, 22:46
請求書ID 131709100035

232001212
jcb
••• 1026
- 127.73 USD
完了
返金
10 12月, 22:46
請求書ID 131709050883

232001212
jcb
••• 1026
- 191.59 USD
完了
返金
10 12月, 22:46
請求書ID 131709112323

232001212
jcb
••• 1026
- 63.86 USD
完了
返金
10 12月, 22:46
請求書ID 131709054979

232001212
jcb
••• 1026
- 63.86 USD
完了
返金
10 12月, 22:46
請求書ID 131709087747

232001212
jcb
••• 1026
- 127.73 USD
完了
返金
10 12月, 22:46
請求書ID 131709067267

232001212
jcb
••• 1026
- 63.86 USD
完了
返金
10 12月, 22:46
請求書ID 131709108227

232001212
jcb
••• 1026
- 38.32 USD
完了
返金
10 12月, 22:46
請求書ID 131709042691

232001212
jcb
••• 1026
- 52.85 USD
完了
返金
10 12月, 22:46
請求書ID 131709091843

232001212
jcb
••• 1026
- 127.73 USD
完了
返金
10 12月, 22:46
請求書ID 131709071363

232001212
jcb
••• 1026
- 63.86 USD
完了
返金
10 12月, 22:46
請求書ID 131709063171

232001212
jcb
••• 1026
- 127.73 USD
完了
返金
10 12月, 22:46
請求書ID 131709083651

232001212
jcb
••• 1026
- 127.73 USD
完了
返金
10 12月, 22:46
請求書ID 131709046787

232001212
jcb
••• 1026
- 127.73 USD
完了
返金
10 12月, 22:46
請求書ID 131709075459

232001212
jcb
••• 1026
- 127.73 USD
完了
返金
10 12月, 22:46
請求書ID 131709104131

232001212
jcb
••• 1026
- 127.73 USD
完了
返金
10 12月, 22:46
請求書ID 131709079555

232001212
jcb
••• 1026
- 191.59 USD
完了
返金
10 12月, 22:46
請求書ID 131709059075

232001212
jcb
••• 1026
- 63.86 USD
完了
返金
10 12月, 22:46
請求書ID 131709120515

232001212
jcb
••• 1026
- 100.42 USD
完了
返金
10 12月, 22:19
請求書ID 131701473283

232001212
jcb
••• 1026
- 266.26 USD
完了
返金
10 12月, 22:19
請求書ID 131701469187

232001212
jcb
••• 1026
- 52.81 USD
完了
返金
10 12月, 19:42
請求書ID 131655790595

232001212
jcb
••• 1026
- 119.77 USD
完了
返金
10 12月, 19:42
請求書ID 131655802883

232001212
jcb
••• 1026
- 7.81 USD
完了
返金
10 12月, 19:42
請求書ID 131655798787

232001212
jcb
••• 1026
- 191.37 USD
完了
返金
10 12月, 19:42
請求書ID 131655794691

232001212
jcb
••• 1026
- 127.58 USD
完了
入金
10 12月, 19:33
請求書ID 131650318339
jcb
••• 1026

232001212
+ 50 000.00 JPY
完了
入金
10 12月, 19:04
請求書ID 131640250371
jcb
••• 1026

232001212
+ 39 000.00 JPY
完了
入金
10 12月, 19:01
請求書ID 131639242755
jcb
••• 1026

232001212
+ 20 000.00 JPY
完了
入金
10 12月, 18:59
請求書ID 131638517763
jcb
••• 1026

232001212
+ 20 000.00 JPY
完了
入金
10 12月, 18:47
請求書ID 131634221059
jcb
••• 1026

232001212
+ 20 000.00 JPY
完了
入金
10 12月, 17:45
請求書ID 131612930051
jcb
••• 1026

232001212
+ 20 000.00 JPY
完了
入金
10 12月, 17:43
請求書ID 131612073987
jcb
••• 1026

232001212
+ 20 000.00 JPY
完了
入金
10 12月, 17:06
請求書ID 131601952771
jcb
••• 1026

232001212
+ 20 000.00 JPY
完了
入金
10 12月, 16:41
請求書ID 131595976707
jcb
••• 1026

232001212
+ 20 000.00 JPY
完了
入金
10 12月, 15:22
請求書ID 131577765891
jcb
••• 1026

232001212
+ 20 000.00 JPY
完了
入金
10 12月, 15:17
請求書ID 131576078339
jcb
••• 1026

232001212
+ 20 000.00 JPY
完了
入金
10 12月, 15:10
請求書ID 131574669315
jcb
••• 1026

232001212
+ 20 000.00 JPY
完了
入金
10 12月, 15:09
請求書ID 131574530051
jcb
••• 1026

232001212
+ 20 000.00 JPY
拒否されました
3Dセキュア（ワンタイムパスワード）認証エラーです。コードが正しく入力されており、有効期限が切れていないことを確認するか、新しいコードをリクエストしてください。問題が解決しない場合は、ご指定の銀行が3Dセキュアに対応していない可能性があります。ご利用の銀行にご連絡いただくか、別のカードまたは決済方法をご利用ください。
入金
10 12月, 13:38
請求書ID 131555008515
jcb
••• 1026

232001212
+ 10 000.00 JPY
完了
返金
10 12月, 13:16
請求書ID 131552108547

232001212
jcb
••• 1026
- 7.82 USD
完了
返金
10 12月, 13:16
請求書ID 131552104451

232001212
jcb
••• 1026
- 127.72 USD
完了
返金
10 12月, 13:16
請求書ID 131552100355

232001212
jcb
••• 1026
- 127.72 USD
完了
返金
10 12月, 13:16
請求書ID 131552096259

232001212
jcb
••• 1026
- 24.11 USD
完了
返金
10 12月, 13:13
請求書ID 131551686659

232001212
jcb
••• 1026
- 127.71 USD
完了
入金
10 12月, 12:29
請求書ID 131543994371
jcb
••• 1026

232001212
+ 20 000.00 JPY
完了
返金
10 12月, 11:25
請求書ID 131535761411

232001212
jcb
••• 1026
- 87.94 USD
完了
返金
10 12月, 11:25
請求書ID 131535765507

232001212
jcb
••• 1026
- 127.67 USD
完了
返金
10 12月, 11:25
請求書ID 131535769603

232001212
jcb
••• 1026
- 167.40 USD
完了
入金
10 12月, 11:12
請求書ID 131534385155
jcb
••• 1026

232001212
+ 30 000.00 JPY
完了
入金
10 12月, 10:43
請求書ID 131531624451
jcb
••• 1026

232001212
+ 30 000.00 JPY
完了
返金
05 12月, 09:45
請求書ID 130176819203

232001212
jcb
••• 1026
- 128.92 USD
完了
返金
05 12月, 09:45
請求書ID 130176823299

232001212
jcb
••• 1026
- 128.92 USD
完了
返金
05 12月, 09:45
請求書ID 130176815107

232001212
jcb
••• 1026
- 24.34 USD
完了
返金
05 12月, 09:45
請求書ID 130176827395

232001212
jcb
••• 1026
- 40.12 USD
完了
資金移動
05 12月, 01:37
請求書ID 152839573509

1090982200853217444

232001212
 103.38 USD
完了
返金
04 12月, 15:50
請求書ID 129893081091

232001212
jcb
••• 1026
- 104.44 USD
完了
返金
04 12月, 15:50
請求書ID 129893076995

232001212
jcb
••• 1026
- 24.31 USD
完了
入金
04 12月, 14:36
請求書ID 129865158659
jcb
••• 1026

232001212
+ 20 000.00 JPY
完了
入金
04 12月, 14:03
請求書ID 129857150979
jcb
••• 1026

232001212
+ 10 000.00 JPY
完了
入金
04 12月, 14:02
請求書ID 129857015811
jcb
••• 1026

232001212
+ 10 000.00 JPY
拒否されました
3Dセキュア（ワンタイムパスワード）認証エラーです。コードが正しく入力されており、有効期限が切れていないことを確認するか、新しいコードをリクエストしてください。問題が解決しない場合は、ご指定の銀行が3Dセキュアに対応していない可能性があります。ご利用の銀行にご連絡いただくか、別のカードまたは決済方法をご利用ください。
返金
04 12月, 10:00
請求書ID 129817833475

232001212
jcb
••• 1026
- 128.93 USD
完了
返金
04 12月, 10:00
請求書ID 129817829379

232001212
jcb
••• 1026
- 121.04 USD
完了
返金
04 12月, 10:00
請求書ID 129817837571

232001212
jcb
••• 1026
- 104.59 USD
完了
入金
04 12月, 09:38
請求書ID 129815195651
jcb
••• 1026

232001212
+ 10 000.00 JPY
完了
資金移動
04 12月, 07:14
請求書ID 151550758917

1090982200853217444

232001212
 316.20 USD
完了
入金
03 12月, 21:12
請求書ID 129596006403
jcb
••• 1026

232001212
+ 6 000.00 JPY
完了
入金
03 12月, 21:11
請求書ID 129595633667
jcb
••• 1026

232001212
+ 20 000.00 JPY
完了
入金
03 12月, 21:04
請求書ID 129593151491
jcb
••• 1026

232001212
+ 20 000.00 JPY
完了
入金
03 12月, 21:01
請求書ID 129591734275
jcb
••• 1026

232001212
+ 20 000.00 JPY
完了
返金
03 12月, 20:58
請求書ID 129590198275

232001212
jcb
••• 1026
- 321.69 USD
完了
返金
03 12月, 20:58
請求書ID 129590194179

232001212
jcb
••• 1026
- 56.46 USD
完了
返金
03 12月, 20:58
請求書ID 129590202371

232001212
jcb
••• 1026
- 7.88 USD
完了
返金
03 12月, 19:38
請求書ID 129566568451

232001212
jcb
••• 1026
- 128.60 USD
完了
返金
03 12月, 19:38
請求書ID 129566572547

232001212
jcb
••• 1026
- 128.60 USD
完了
返金
03 12月, 19:38
請求書ID 129566576643

232001212
jcb
••• 1026
- 265.07 USD
完了
返金
03 12月, 19:38
請求書ID 129566564355

232001212
jcb
••• 1026
- 120.73 USD
完了
入金
03 12月, 18:00
請求書ID 129536790531
jcb
••• 1026

232001212
+ 20 000.00 JPY
完了
入金
03 12月, 17:59
請求書ID 129536376835
jcb
••• 1026

232001212
+ 20 000.00 JPY
完了
入金
03 12月, 17:35
請求書ID 129530195971
jcb
••• 1026

232001212
+ 20 000.00 JPY
完了
入金
03 12月, 16:58
請求書ID 129522024451
jcb
••• 1026

232001212
+ 30 000.00 JPY
完了
入金
03 12月, 16:02
請求書ID 129506598915
jcb
••• 1026

232001212
+ 20 000.00 JPY
完了
入金
03 12月, 15:52
請求書ID 129504440323
jcb
••• 1026

232001212
+ 10 000.00 JPY
完了
入金
03 12月, 15:43
請求書ID 129502027779
jcb
••• 1026

232001212
+ 10 000.00 JPY
完了
入金
03 12月, 15:23
請求書ID 129495797763
jcb
••• 1026

232001212
+ 20 000.00 JPY
完了
入金
03 12月, 15:22
請求書ID 129495502851
jcb
••• 1026

232001212
+ 10 000.00 JPY
完了
入金
03 12月, 15:21
請求書ID 129495130115
jcb
••• 1026

232001212
+ 10 000.00 JPY
完了
返金
03 12月, 14:38
請求書ID 129479745539

232001212
jcb
••• 1026
- 128.47 USD
完了
返金
03 12月, 14:38
請求書ID 129479716867

232001212
jcb
••• 1026
- 128.47 USD
完了
返金
03 12月, 14:38
請求書ID 129479737347

232001212
jcb
••• 1026
- 128.47 USD
完了
返金
03 12月, 14:38
請求書ID 129479720963

232001212
jcb
••• 1026
- 192.71 USD
完了
返金
03 12月, 14:38
請求書ID 129479729155

232001212
jcb
••• 1026
- 128.47 USD
完了
返金
03 12月, 14:38
請求書ID 129479696387

232001212
jcb
••• 1026
- 192.71 USD
完了
返金
03 12月, 14:38
請求書ID 129479688195

232001212
jcb
••• 1026
- 56.37 USD
完了
返金
03 12月, 14:38
請求書ID 129479725059

232001212
jcb
••• 1026
- 128.47 USD
完了
返金
03 12月, 14:38
請求書ID 129479733251

232001212
jcb
••• 1026
- 128.47 USD
完了
返金
03 12月, 14:38
請求書ID 129479700483

232001212
jcb
••• 1026
- 128.47 USD
完了
返金
03 12月, 14:38
請求書ID 129479692291

232001212
jcb
••• 1026
- 128.47 USD
完了
返金
03 12月, 14:38
請求書ID 129479741443

232001212
jcb
••• 1026
- 128.47 USD
完了
返金
03 12月, 14:38
請求書ID 129479749635

232001212
jcb
••• 1026
- 7.86 USD
完了
返金
03 12月, 14:38
請求書ID 129479708675

232001212
jcb
••• 1026
- 128.47 USD
完了
返金
03 12月, 14:38
請求書ID 129479704579

232001212
jcb
••• 1026
- 321.18 USD
完了
返金
03 12月, 14:38
請求書ID 129479712771

232001212
jcb
••• 1026
- 128.47 USD
完了
入金
03 12月, 14:20
請求書ID 129474478083
jcb
••• 1026

232001212
+ 30 000.00 JPY
完了
入金
03 12月, 14:13
請求書ID 129472933891
jcb
••• 1026

232001212
+ 20 000.00 JPY
完了
返金
03 12月, 14:01
請求書ID 129470468099

232001212
jcb
••• 1026
- 72.12 USD
完了
返金
03 12月, 14:01
請求書ID 129470464003

232001212
jcb
••• 1026
- 128.51 USD
完了
返金
03 12月, 14:01
請求書ID 129470459907

232001212
jcb
••• 1026
- 120.64 USD
完了
入金
03 12月, 13:52
請求書ID 129468571651
jcb
••• 1026

232001212
+ 50 000.00 JPY
完了
入金
03 12月, 13:51
請求書ID 465798737926
binance-pay
BinancePay

232001212
+ 20 000.00 USD
拒否されました
振込依頼書に不備があるか、接続に失敗したため、お取引がキャンセルされました。もう一度お試しいただくか、別の決済方法をご利用ください。
資金移動
03 12月, 03:05
請求書ID 149923368965

1090982200853217444

232001212
 237.36 USD
完了
入金
02 12月, 16:48
請求書ID 129057726467
jcb
••• 1026

232001212
+ 9 500.00 JPY
完了
入金
02 12月, 16:46
請求書ID 129057255427
jcb
••• 1026

232001212
+ 30 000.00 JPY
完了
入金
02 12月, 16:39
請求書ID 129055178755
jcb
••• 1026

232001212
+ 20 000.00 JPY
完了
入金
02 12月, 16:32
請求書ID 129053171715
jcb
••• 1026

232001212
+ 20 000.00 JPY
完了
入金
02 12月, 16:22
請求書ID 129050034179
jcb
••• 1026

232001212
+ 20 000.00 JPY
完了
入金
02 12月, 16:21
請求書ID 129049534467
jcb
••• 1026

232001212
+ 20 000.00 JPY
完了
入金
02 12月, 16:18
請求書ID 129048805379
jcb
••• 1026

232001212
+ 30 000.00 JPY
拒否されました
3Dセキュア（ワンタイムパスワード）認証エラーです。コードが正しく入力されており、有効期限が切れていないことを確認するか、新しいコードをリクエストしてください。問題が解決しない場合は、ご指定の銀行が3Dセキュアに対応していない可能性があります。ご利用の銀行にご連絡いただくか、別のカードまたは決済方法をご利用ください。
入金
02 12月, 15:32
請求書ID 129032425475
jcb
••• 1026

232001212
+ 50 000.00 JPY
完了
入金
02 12月, 15:23
請求書ID 129025667075
jcb
••• 1026

232001212
+ 20 000.00 JPY
完了
入金
02 12月, 15:21
請求書ID 129024454659
jcb
••• 1026

232001212
+ 20 000.00 JPY
完了
入金
02 12月, 15:19
請求書ID 129024045059
jcb
••• 1026

232001212
+ 20 000.00 JPY
完了
入金
02 12月, 14:55
請求書ID 129017401347
jcb
••• 1026

232001212
+ 20 000.00 JPY
完了
入金
02 12月, 14:51
請求書ID 129016406019
jcb
••• 1026

232001212
+ 20 000.00 JPY
完了
入金
02 12月, 14:47
請求書ID 129015365635
jcb
••• 1026

232001212
+ 20 000.00 JPY
完了
入金
02 12月, 13:49
請求書ID 129003401219
jcb
••• 1026

232001212
+ 20 000.00 JPY
完了
入金
02 12月, 13:47
請求書ID 129002995715
jcb
••• 1026

232001212
+ 20 000.00 JPY
完了"""

def parse_transactions(data):
    """取引データを解析して、カテゴリとステータスごとに集計"""
    # カテゴリ: 入金, 返金, 資金移動, 出金
    # ステータス: 完了, 拒否されました, 処理中
    
    # 集計用の辞書: {カテゴリ: {ステータス: {通貨: 合計}}}
    summary = defaultdict(lambda: defaultdict(lambda: defaultdict(float)))
    
    lines = data.split('\n')
    i = 0
    current_category = None
    
    while i < len(lines):
        line = lines[i].strip()
        
        # カテゴリの検出
        if line in ['入金', '返金', '資金移動', '出金']:
            current_category = line
            i += 1
            continue
        
        # ステータスの検出
        if line in ['完了', '拒否されました', '処理中']:
            current_status = line
            # 前の数行から金額を取得（最大10行前まで検索）
            found_amount = False
            for j in range(max(0, i-10), i):
                amount_line = lines[j].strip()
                # 金額パターンの検出: + 4 900.00 JPY または - 12.68 USD または  529.58 USD または + 20 000.00 USD
                # パターン: [+-]? [数字] [JPY|USD]
                amount_match = re.search(r'([+\-]?)\s*([\d\s,]+\.\d+)\s*(JPY|USD)', amount_line)
                if amount_match:
                    sign = amount_match.group(1).strip()
                    amount_str = amount_match.group(2).replace(' ', '').replace(',', '')
                    currency = amount_match.group(3)
                    amount = float(amount_str)
                    
                    # 符号の処理
                    if sign == '-':
                        amount = -abs(amount)
                    elif sign == '+' or (sign == '' and current_category == '入金'):
                        amount = abs(amount)
                    elif current_category == '返金':
                        amount = -abs(amount)
                    elif current_category == '資金移動':
                        amount = abs(amount)
                    elif current_category == '出金':
                        amount = -abs(amount)
                    
                    if current_category and current_status:
                        summary[current_category][current_status][currency] += amount
                    found_amount = True
                    break
            
            i += 1
            continue
        
        i += 1
    
    return summary

def format_amount(amount, currency):
    """金額をフォーマット"""
    if currency == 'JPY':
        return f"{amount:,.0f} {currency}"
    else:
        return f"{amount:,.2f} {currency}"

def print_summary(summary):
    """集計結果を表示"""
    categories = ['入金', '返金', '資金移動', '出金']
    statuses = ['完了', '拒否されました', '処理中']
    
    print("=" * 80)
    print("取引履歴 集計結果")
    print("=" * 80)
    print()
    
    for category in categories:
        if category not in summary:
            continue
        
        print(f"【{category}】")
        print("-" * 80)
        
        category_total_jpy = 0
        category_total_usd = 0
        
        for status in statuses:
            if status not in summary[category]:
                continue
            
            status_total_jpy = 0
            status_total_usd = 0
            
            for currency in ['JPY', 'USD']:
                if currency in summary[category][status]:
                    amount = summary[category][status][currency]
                    if currency == 'JPY':
                        status_total_jpy += amount
                    else:
                        status_total_usd += amount
            
            if status_total_jpy != 0 or status_total_usd != 0:
                print(f"  {status}:")
                if status_total_jpy != 0:
                    print(f"    JPY: {format_amount(status_total_jpy, 'JPY')}")
                if status_total_usd != 0:
                    print(f"    USD: {format_amount(status_total_usd, 'USD')}")
                print()
        
        # カテゴリ合計
        for status in statuses:
            if status in summary[category]:
                for currency in ['JPY', 'USD']:
                    if currency in summary[category][status]:
                        amount = summary[category][status][currency]
                        if currency == 'JPY':
                            category_total_jpy += amount
                        else:
                            category_total_usd += amount
        
        if category_total_jpy != 0 or category_total_usd != 0:
            print(f"  【{category} 合計】")
            if category_total_jpy != 0:
                print(f"    JPY: {format_amount(category_total_jpy, 'JPY')}")
            if category_total_usd != 0:
                print(f"    USD: {format_amount(category_total_usd, 'USD')}")
            print()
        
        print()

if __name__ == "__main__":
    summary = parse_transactions(data)
    print_summary(summary)
    
    # 結果をファイルに出力
    with open('transaction_summary_result.txt', 'w', encoding='utf-8') as f:
        import sys
        from io import StringIO
        old_stdout = sys.stdout
        sys.stdout = StringIO()
        print_summary(summary)
        output = sys.stdout.getvalue()
        sys.stdout = old_stdout
        f.write(output)
    
    print("\n結果を 'transaction_summary_result.txt' に保存しました。")

